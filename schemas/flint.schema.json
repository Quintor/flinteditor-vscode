{
    "$schema": "https://json-schema.org/draft/2019-09/schema#",
    "type": "object",
    "definitions": {
        "expression": {
            "anyOf": [
                {"$ref": "#/definitions/multi"},
                {"$ref": "#/definitions/not"},
                {"$ref": "#/definitions/list"},
                {"type": "string",
                 "defaultSnippets": [{
                    "label": "Fact",
                    "description": "Insert fact",
                    "body": "[$1]"
                    }
                 ]
                }
            ]
        },
        "list": {
            "type": "object",
            "properties": {
                "expression": {
                    "type": "string", 
                    "pattern": "^LIST$"
                },
                "name": {
                    "type": "string"
                },
                "items": {"$ref": "#/definitions/expression"}
            },
            "defaultSnippets": [
                {
                    "label": "LIST",
                    "description": "Insert LIST",
                    "body": {
                        "expression": "LIST",
                        "name": "^$1",
                        "items": [
                            "^$2"
                        ]
                    }
                }
            ]
        },
        "multi": {
            "type": "object",
            "properties": {
                "expression": {
                    "type": "string", 
                    "pattern": "^(AND)|(OR)$"
                },
                "operands": {
                    "type": "array", 
                    "items": {"$ref": "#/definitions/expression"}
                }
            },
            "defaultSnippets": [
                {
                    "label": "AND",
                    "description": "Insert AND",
                    "body": {
                        "expression": "AND",
                        "operands": [
                            "^$1"
                        ]
                    }
                },
                {
                    "label": "OR",
                    "description": "Insert OR",
                    "body": {
                        "expression": "OR",
                        "operands": [
                            "^$1"
                        ]
                    }
                }
            ]
        },
        "not": {
            "type": "object",
            "properties": {
                "expression": {
                    "type": "string", 
                    "pattern": "^NOT$"
                },
                "operand": {"$ref": "#/definitions/expression"}
            },
            "defaultSnippets": [
                {
                    "label": "NOT",
                    "description": "Insert NOT",
                    "body": {
                        "expression": "NOT",
                        "operand": "^$1"
                        
                    }
                }
            ]
        }
    },
    "properties": {
        "acts": {
            "type": "array",
            "items":  {
                "type": "object",
                "properties": {
                    "act": { "type": "string"},
                    "actor": { "type": "string"},
                    "action": { "type": "string"},
                    "object": { "type": "string"},
                    "interested-party": { "type": "string"},
                    "preconditions": { "$ref": "#/definitions/expression"},
                    "create": { "type": "array", "items": {"type": "string"}},
                    "terminate": { "type": "array", "items": {"type": "string"}},
                    "version": { "type": "string"},
                    "reference": { "type": "string"},
                    "juriconnect": { "type": "string"},
                    "sourcetext": { "type": "string"},
                    "explanation": { "type": "string"}
                },
                "required": ["act", "actor", "action", "object", "interested-party", "preconditions",
                "create", "terminate", "version", "reference", "juriconnect", "sourcetext", "explanation"],
                "defaultSnippets": [
                    {
                        "label": "New Act",
                        "description": "Insert a new act",
                        "body": {
                            "act": "<<$1>>",
                            "actor": "[$2]",
                            "action": "[$3]",
                            "object": "[$4]",
                            "interested-party": "[$5]",
                            "preconditions": "$6",
                            "create": [],
                            "terminate": [],
                            "version": "$9",
                            "reference": "$10",
                            "juriconnect": "$11",
                            "sourcetext": "$12",
                            "explanation": "$13"
                        }
                    }
                ]
            }
        },
        "facts": {
            "type": "array",
            "items":  {
                "type": "object",
                "properties": {
                    "fact": { "type": "string"},
                    "function": { "$ref": "#/definitions/expression"},
                    "version": { "type": "string"},
                    "art": { "type": "string"},
                    "juriconnect": { "type": "string"},
                    "sourcetext": { "type": "string"},
                    "explanation": { "type": "string"}
                },
                "required": ["fact", "function", "version", "juriconnect", "sourcetext", "explanation"],
                "defaultSnippets": [
                    {
                        "label": "New Fact",
                        "description": "Insert a new fact",
                        "body": {
                            "fact": "[$1]",
                            "function": "$2",
                            "version": "$3",
                            "art": "$4",
                            "juriconnect": "$5",
                            "sourcetext": "$6",
                            "explanation": "$7"
                        }
                    }
                ]
            }
        },
        "duties": {
            "type": "array",
            "items":  {
                "type": "object",
                "properties": {
                    "duty": { "type": "string"},
                    "duty-components": { "type": "string"},
                    "duty-holder": { "type": "string"},
                    "claimant": { "type": "string"},
                    "create": { "type": "string"},
                    "terminate": { "type": "string"},
                    "version": { "type": "string"},
                    "reference": { "type": "string"},
                    "juriconnect": { "type": "string"},
                    "sourcetext": { "type": "string"},
                    "explanation": { "type": "string"}
                },
                "required": ["duty", "duty-components", "duty-holder", "claimant",
                "create", "terminate", "version", "reference", "juriconnect", "sourcetext", "explanation"],
                "defaultSnippets": [
                    {
                        "label": "New Duty",
                        "description": "Insert a new duty",
                        "body": {
                            "duty": "<$1>",
                            "duty-components": "$2",
                            "duty-holder": "[$3]",
                            "claimant": "[$4]",
                            "create": "$5",
                            "terminate": "$6",
                            "version": "$7",
                            "reference": "$8",
                            "juriconnect": "$9",
                            "sourcetext": "$10",
                            "explanation": "$11"
                        }
                    }
                ]
            }
        }
    },
    "required": ["acts", "facts", "duties"]
}